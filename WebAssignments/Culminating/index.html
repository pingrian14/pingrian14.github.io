<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CT</title>

    <style>
        body {
            background-color:black;
            color:whitesmoke;
            font-family:Verdana, Geneva, Tahoma, sans-serif;

            display:flex;
            justify-content: center;
            align-items: center;

            height:100vh;

        }

        h1 {
            font-size:4rem;
            margin:8px;
        }

        .container {
            
            display:grid;
            border:1px solid white;
            /* justify-items: center;
            justify-content: center;
            align-items: center;
            align-content: center; */

            width:1700px;
            height:800px;


            grid-template-columns: 1fr 6fr 1fr;
            grid-template-rows: 1fr 4fr 1fr;

            /* grid-auto-columns: 200px;
            grid-auto-rows: 200px; */
            gap:1em;
            height: 800px;
            
            /* 
            grid-template-areas: 
                "box-1 box-2 box-3 box-4"
                "box-5 box-6 box-6 box-7"
                "box-8 box-6 box-6 box-9"
                "box-10 box-11 box-12 box-13" */

        }

        .buttonContainer {
            display:grid;
            padding:2px;
            gap:1em;
            /* border: 3px solid pink; */

        }

        .button {
            border:5px solid white;
            color:black;
            text-align: center;
            background-color:#a7c6dc;
            padding:1rem;
        }

        .button:hover {
            border:5px solid white;
            background-color:#c2e6ff;
        }

        .button:active {
            border:5px solid white;
            background-color:#a7c6dc;
        }

        .border {
            border:20px solid white;
            background-color: #5a9bc8;

            padding:2em;
        }

        .inner{
            border:20px solid white;
            background-color:black;
            padding:8px;
            display:flex;

            justify-content: center;
            align-items: center;
            flex-direction: column;

            position:relative;
        }

        /* ------------- Choosing mode section ------------- */

        .choosingMode {
            background-color:black;
            visibility:hidden;
            z-index:10;
            padding:10px;

            position: absolute;
            display:flex;
            justify-content: space-evenly;
            width:97.9%;
            height:95%;
            top:0;
            left:0;

        }

        .gameModesContainer {
            display:flex;
            justify-content: space-evenly;
            align-items: center;
            width:100%;
            /* border:2px solid pink; */

        }

        .gameModes {
            width:750px;
            height:350px;
            border-radius: 30px;
            color:black;
            text-align: center;
            background-color:#a7c6dc;
            display:flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            
            padding:1rem;
        }

        .img {
            
            width:12%;
            height:100%;
            display:flex;
            align-items: end;
            justify-content: center;
        }

        .betweenImg {
            display:flex;
            flex-direction: column;
            align-items: center;
        }

        /* ------------- How to play section ------------- */
        .instructions {
            background-color:black;
            visibility:hidden;
            z-index:10;
            padding:10px;

            position: absolute;
            display:flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            text-align:center;
            width:97.9%;
            height:95%;
            top:0;
            left:0;

        }

        /* ------------- X button and visibility parts ------------- */

        .xButton {
            /* margin-top:30px; */
            width:55px;
            height:55px;
            /* background-color:#a7c6dc; */
            border-radius: 18px;
            color:#c85a5a;
            font-size: 350%;
            font-weight:bold;

            display:flex;
            justify-content: center;
            align-items: center;

            /* border:2px solid pink; */
        }

        .is-shown {
            visibility:visible;
        }

        /* ------------- For adding players ------------- */

        .addPlayersarea {
            
            width:25px;
            height:25px;
            background-color:#a7c6dc;
            border-radius: 18px;
            font-size: 200%;
            font-weight:bold;

            display:flex;
            justify-content: center;
            align-items: center;

            /* border:2px solid pink; */
        }

        .addPlayers {
            width:45px;
            height:45px;
            border-radius: 15px;
            text-align: center;
        }

        .player {
            width:100px;
            height: 30px;
            border-radius: 20px;
            text-align: center;
        }

        .error {
            color:red;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="border"></div>
        <div class="border"></div>
        <div class="border"></div>
        <div class="border"></div>
        <div class="inner">
            <h1>Trivia</h1>
            <p>Multiplayer Game</p>
            <div class="buttonContainer">
                
                <div class="button" id="playButton">Play Now</div>
                <div class="button" id="htpButton">How to Play</div>
                
                <!----------  appears when play button is clicked ---------->
                <div class="choosingMode" id="choosingMode">
                    
                    <!-- shows player selection  -->
                    <div class="gameModesContainer">
                        
                        <div class="gameModes">
                            <div class="img"><img src="multiplayer.png" width="80px" height="80px"></div>
                            <div class="betweenImg">
                                <h2>Player Selection</h2>
                                <p>Play 2 - 4 others in the room!</p>
                                
                                <input type="number" class="addPlayers" id="addPlayers">

                                <!-- input for players are added here -->
                                <form class="addPlayersArea" id="addPlayersArea"></form>

                                <h4 class="error" id="error"></h4>

                                <button class="button" id="multiplayerButton" type="submit">Play Now</button>
                            </div>
                            
                            <div class="img"><img src="multiplayer.png" width="80px" height="80px"></div>
                        </div>
                        
                    </div>
                    <!-- x button -->
                    <div class="xButton" id="xButton1">x</div>
                    
                </div>

                <!----------  appears when play button is clicked ---------->
                <div class="instructions" id="instructions">
                    <!-- x button -->
                    <div class="xButton" id="xButton2">x</div>
                    <h2 id="introText1"></h2>
                    <h3 id="introText2"></h3>
                    <h3 id="introText3"></h3>
                    
                </div>
            </div>
            
            
        </div>
        <div class="border"></div>
        <div class="border"></div>
        <div class="border"></div>
        <div class="border"></div>
        
        
        
        <!-- <div class="border">.</div>
        <div class="border">.</div>
        <div class="border">.</div>
        <div class="border">.</div> -->
    </div>
    
    <script>
        // constants used
        const playButton = document.getElementById("playButton");
        const choosingMode = document.getElementById("choosingMode");
        
        const rulesButton = document.getElementById("htpButton");
        const instructions = document.getElementById("instructions");
        const instructionsText1 = document.getElementById("introText1");
        const instructionsText2 = document.getElementById("introText2");
        const instructionsText3 = document.getElementById("introText3");
        
        const xButton1 = document.getElementById("xButton1");
        const xButton2 = document.getElementById("xButton2");

        const addPlayersArea = document.getElementById("addPlayersArea");
        const addPlayers = document.getElementById("addPlayers");
        const multiplayerButton = document.getElementById("multiplayerButton");

        const error = document.getElementById("error");


        //shows game modes
        playButton.addEventListener("click", showModes);
        function showModes() {
            choosingMode.classList.toggle("is-shown")
            console.log(choosingMode.classList.value);
        }
        
        //shows how-to-play text
        rulesButton.addEventListener("click", showInstructions);
        function showInstructions() {
            instructions.classList.toggle("is-shown")
            console.log(instructions.classList.value);
            instructionsText1.innerHTML = "Welcome to Trivia Game!";
            instructionsText2.innerHTML = "This is a multiplayer game that must be played with 2-4 players in the same room. Player 1 gets to choose the topic and amount of money they would like to try getting at the beginning. Anyone can buzz in to answer the question at any time, but if you do it too early, you will not get to see the full question. Whoever gets it correct will get to select what's next, but if no one gets it right, the previous one who picked will continue choosing.";
            instructionsText3.innerHTML = "Whoever gets the most money when the board is fully cleared wins!";

        }
        
        //x button to hide game mode
        xButton1.addEventListener("click", hideModes);
        function hideModes() {
            choosingMode.classList.toggle("is-shown");
            console.log(choosingMode.classList.value);
            
        }

        //x button to hide hot-to-play
        xButton2.addEventListener("click", hideHtp);
        function hideHtp() {
            instructions.classList.toggle("is-shown");
            console.log(instructions.classList.value);
            
        }

        //
        ready = false;
        let totalPlayers = "";
        let playerList = [];


        //runs when the number of players change values
        addPlayers.addEventListener("change", changeInputs)
        function changeInputs() {
            totalPlayers = Math.floor(addPlayers.value);
            
            console.log(`Total players: ${totalPlayers}`);
            addPlayersArea.innerHTML = "";

            //makes sure that players is 2 - 4
            if (totalPlayers >= 2 && totalPlayers <=4) {
                error.innerHTML = "";
                for (let i = 1; i <= totalPlayers; i++) {

                    //gives the player an id and adds it to an input box
                    let playerId = `player${i}`;
                    console.log(`Player ID is ${playerId}`);
                    addPlayersArea.innerHTML += `<input class="player" id="${playerId}" placeholder="${playerId} name">`;
                    ready = true;
                }
            //displays an error message
            } else {
                error.innerHTML = `${totalPlayers} does not match the requirement.`;
                ready = false;
            }
        }

        
        multiplayerButton.addEventListener("click", checkPlayers);
        
        //check if all players are named
        function checkPlayers() {
            playerList = [];
            if (ready === true) {
                //gives each player a playerid
                for (let i = 1; i <= totalPlayers; i++) {
                    let playerId = `player${i}`;
                    console.log(`Player id is ${playerId}`);
                    let playerName = document.getElementById(`${playerId}`).value;
                    console.log(`${playerId} is ${playerName}`);

                    //adds to player list if there's a name there, displays error message if not
                    if (playerName.trim() !== "") {
                        playerList.push(playerName);

                    } else{
                        error.innerHTML = `Players must all be named`;

                        break;
                    }

                    //transfers data to game.html
                    console.log("Transfering data...");
                    localStorage.setItem("playerList", playerList);
                    window.location.href = "game.html";
                    

                }

                console.log(`Player list: ${playerList}`);
            } else {
                error.innerHTML = `Not all requirements are met.`;
                
            }

            
        }


    </script>
</body>
</html>

